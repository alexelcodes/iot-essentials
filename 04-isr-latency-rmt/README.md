# ISR & Task Latency Measurement (ESP32, FreeRTOS, RMT)

Interrupt-to-task latency measurement project for ESP32 using FreeRTOS.

The goal is to measure how long it takes for a GPIO edge to propagate through:
GPIO interrupt → ISR → queue → task handler.

Different scheduling scenarios are compared to understand the impact of context switching, task priorities, and asynchronous events.

## What is demonstrated

- GPIO interrupt handling (ISR)
- ISR → queue → task communication
- Immediate context switch from ISR (`portYIELD_FROM_ISR`)
- FreeRTOS task priorities and preemption
- Runtime task statistics
- Hardware pulse generation using RMT (asynchronous interrupts)
- Oscilloscope-based latency measurements (µs precision)

## Experiments

Three scenarios were measured:

1. Synchronous interrupt (default scheduler behavior)
2. ISR with immediate context switch
3. Asynchronous interrupt generated by RMT peripheral

Measured results are available in `latency-results.md`.

## Structure

```
isr-latency/
├── main/
│   ├── isr_latency.c          – ISR, queue, tasks, RMT setup and measurement logic
│   └── CMakeLists.txt
├── CMakeLists.txt
└── sdkconfig
```

## Notes

- ISR sets a GPIO HIGH to mark interrupt entry
- The task clears the GPIO after processing the queued event
- Latency is measured with an oscilloscope
- RMT generates hardware pulses to simulate asynchronous hardware events
